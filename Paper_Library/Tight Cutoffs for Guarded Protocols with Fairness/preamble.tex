\newif\iffinal
  \finaltrue

\newif\ifwithextensions
\withextensionsfalse

\let\proof\relax
\let\endproof\relax
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{temporal}
\usepackage{cite}
%\usepackage{natbib}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{enumitem}
\usepackage{wrapfig}
\usepackage{environ}
\usepackage{multirow}
\usepackage{xspace}
\usepackage{color,soul}
  \definecolor{lightblue}{rgb}{.8,.95,1}
  \newcommand{\new}[1]{\sethlcolor{lightblue}\hl{#1}\sethlcolor{yellow}}
  \newcommand{\bug}[1]{\sethlcolor{green}\hl{#1}\sethlcolor{yellow}}

\usepackage{thmtools, thm-restate}

\usepackage{tikz}
\usepackage{pgf}
\usetikzlibrary{positioning,calc,automata,arrows,fit,shapes}

\usepackage{caption}
\usepackage{mdframed}

% ignore llncs note command
\let\note\relax
\let\endnote\relax

\iffinal
  \usepackage[finalold]{trackchanges} % also use \sr,\sj,\ak,\ba
\else
  \usepackage[inline]{trackchanges}
\fi

\addeditor{$S\!J$}
\addeditor{$S\!A$}
\addeditor{$A\!K$}
\addeditor{$R\!B$}
\newcommand{\sj}[1]{\note[$S\!J$]{#1}}
\newcommand{\sa}[1]{\note[$S\!A$]{#1}}
\newcommand{\ak}[1]{\note[$A\!K$]{#1}}
\newcommand{\rb}[1]{\note[$R\!B$]{#1}}


\newcommand{\listOfKeywords}{parameterized model checking, reactive synthesis, distributed systems, guarded protocols, deadlocks, fairness}
% moved hyperref to llncs_front
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\mailto}[1]{\href{mailto:#1}{\nolinkurl{#1}}}


\newcommand{\AP}{{\sf AP}}
\newcommand{\mT}{\mathcal{T}}
\newcommand{\mI}{\mathcal{I}}
\newcommand{\mC}{\mathcal{C}}
\newcommand{\mD}{\mathcal{D}}
\newcommand{\mF}{\mathcal{F}}
\newcommand{\mX}{\mathcal{X}}
\newcommand{\mM}{\mathcal{M}}
\newcommand{\mA}{\mathcal{A}}
\newcommand{\mP}{\mathcal{P}}
\newcommand{\mB}{\mathcal{B}}
\newcommand{\mU}{\mathcal{U}}
\newcommand{\mS}{\mathcal{S}}
\newcommand{\mE}{\mathcal{E}}
\newcommand{\mQ}{\mathcal{Q}}
\newcommand{\bbN}{\mathbb{N}}
\newcommand{\bbB}{\mathbb{B}}
\newcommand{\bbR}{\mathbb{R}}
\newcommand{\bigdotcup}{\ensuremath{\mathaccent\cdot{\bigcup}}}
\newcommand{\pclass}{{\sf cl}}
\newcommand{\val}{{\sf val}}
\newcommand{\guard}{{\sf guard}}
\newcommand{\eval}{{\sf eval}}
\newcommand{\init}{{\sf init}\xspace}
\newcommand{\templateI}{A}
\newcommand{\templateII}{B}
\newcommand{\formula}{F}
\newcommand{\formulas}{\mathcal{\formula}}
\newcommand{\inputs}{\Sigma}
\newcommand{\localin}{\sigma}
\newcommand{\globIn}{E}

\newcommand{\visited}{\mathsf{Visited}}
\newcommand{\visInf}[2]{\mathsf{Visited}^\inf_{#1}\!(#2)}
\newcommand{\visFin}[2]{\mathsf{Visited}^\fin_{#1}\!(#2)}
\newcommand{\witness}{\mathsf{witness}}
\newcommand{\witfirst}{\mathsf{wit\_first}}
\newcommand{\witsecond}{\mathsf{wit\_second}}
\newcommand{\witlast}{\mathsf{wit\_last}}
\newcommand{\first}{\mathsf{first}}
\newcommand{\enter}{\mathsf{enter}}
\newcommand{\exit}{\mathsf{exit}}

\newcommand{\deadlock}{\mathsf{lock}}
\newcommand{\cutoff}{\mathsf{cutoff}}
\newcommand{\destutter}{\ensuremath{\mathsf{destutter}}\xspace}
\newcommand{\bound}{b}

%\newcommand{\template}{\mathcal{P}}

% \newcommand{\sched}{{{\sf sched}}}
\newcommand{\sched}{{{\sf move}}}
% \newcommand{\enabled}{{{\sf enabled}}}
\newcommand{\enabled}{{{\sf en}}}
\newcommand{\moves}{{{\sf moves}}}

\newcommand\LTLmX{\ensuremath{\mbox{\textsf{LTL}}\backslash\textsf{X}}}
\newcommand\LTL{\ensuremath{\mbox{\textsf{LTL}}}}
\newcommand\CTLstar{\ensuremath{\mbox{\textsf{CTL}}^*}}

\definecolor{darkgreen}{rgb}{0,0.5,0}
\definecolor{darkblue}{rgb}{0,0,.5}
\definecolor{mygray}{gray}{.3}

%% macros for LTSs (states, state sets, etc.)
%% to change whole batch, just change \state command
\newcommand{\state}{q}
\newcommand{\initstate}{{\sf init}\xspace}
\newcommand{\stateset}{\expandafter\MakeUppercase\expandafter{\state}}
\newcommand{\State}{s}
\newcommand{\Stateset}{\expandafter\MakeUppercase\expandafter{\State}}
\newcommand{\LTS}{\mathcal \stateset}
%% transition function, state labels, ...
\newcommand{\trans}{\ensuremath{\delta}}
\newcommand{\Trans}{\ensuremath{\Delta}}
\newcommand{\labeling}{L}
\newcommand{\labelings}{\mathcal{\labeling}}
%\newcommand{\inputs}{I}
\newcommand{\outputs}{O}
\renewcommand{\time}{m}
\newcommand{\dead}{{\sf dead}\xspace}

\newcommand{\myloop}[1]{\ensuremath{#1 \rightarrow \initstate \rightarrow #1}\xspace}


%% set cardinality
\newcommand{\card}[1]{\left| {#1} \right|}
\newcommand{\Nat}{\ensuremath{\mathbb{N}}}
%% 'such that'
\renewcommand{\|}{\mid}
\newcommand{\smi}{\!\setminus\!}
%% disjoint union
\newcommand{\cupdot}{\mathbin{\dot{\cup}}}

%paragraph with some skip and bold heading
\newcommand{\smartpar}[1]{\medskip \noindent {\bf #1}}


%% specification, implication
\newcommand{\spec}{\Phi}
\newcommand{\pspec}{\Phi}
\newcommand{\impl}{\rightarrow}
\newcommand{\Impl}{\Rightarrow}
\newcommand{\Implied}{\Leftarrow}
\renewcommand{\iff}{\Leftrightarrow}

%\newtheorem{thm}{Theorem}
%\newtheorem{lem}{Lemma}
%\newtheorem{cor}[thm]{Corollary}
%\newtheorem{exa}{Example}
%\newtheorem{obs}{Observation}
\declaretheorem[name=Theorem]{thm}
\declaretheorem[name=Lemma]{lem}
\declaretheorem[name=Corollary]{cor}
\declaretheorem[name=Observation]{obs}
\declaretheorem[name=Tightness]{tightness}

\newcommand{\disj}[1]{\ensuremath{\exists\{#1\}}}
\newcommand{\conj}[1]{\ensuremath{\forall\{#1\}}}

% Disj proof
\newcommand{\sys}[1]{(A,B)^{(#1)}}
\newcommand{\cutoffsys}{\ensuremath{(A,B)^{(1,c)}}\xspace}
\newcommand{\largesys}{\ensuremath{(A,B)^{(1,n)}}\xspace}
\newcommand{\interleave}{\ensuremath{\textit{interleave}}\xspace}
%\newcommand{\first}{\textit{first}}
\newcommand{\last}{\mathsf{last}}
\renewcommand{\l}{\mathsf{l}}
\newcommand{\f}{\mathsf{f}}
\newcommand{\rpt}{\mathsf{rpt}}
% \newcommand{\ppi}{\mathsf{pi}}
\newcommand{\ppi}[1]{\mathsf{p}_{\circlearrowleft #1}}
\newcommand{\ei}[1]{\mathsf{e}_{\circlearrowleft #1}}
\newcommand{\qstar}{{\ensuremath{q^\star}}}
\newcommand{\estar}{{\ensuremath{\mathsf{e}^\star}}}
\newcommand{\fstar}{{\ensuremath{\mathsf{f}^\star}}}
\newcommand{\fin}{\textit{fin}}
\newcommand{\pref}{\mathsf{pref}}
\newcommand{\reach}{\mathsf{reach}}
\newcommand{\tpref}{\textit{pref}}

\renewcommand{\inf}{\textit{inf}}
\newcommand{\lo}{\circlearrowleft}

\newcommand{\others}{\textit{others}}
\newcommand{\looop}{\textit{loop}}
\newcommand{\xloop}{\mathsf{xloop}}
\newcommand{\yloop}{\mathsf{yloop}}
\newcommand{\yround}{\mathsf{round}}
\newcommand{\inject}{\mathsf{inject}}

\iffinal
\newcommand{\gray}[1]{}
\newcommand{\blue}[1]{{\color{blue!80} #1}}
\else
\newcommand{\gray}[1]{{\color{black!50} #1}}
\newcommand{\blue}[1]{{\color{blue!80} #1}}
\fi

\newcommand{\transition}[3]{#1 \stackrel{#3}{\rightarrow} #2}
\newcommand{\slice}[2]{\ensuremath{[{#1}\!:\!{#2}]}}
\newcommand{\MinComp}[1]{\ensuremath{x(B^{\witfirst_{#1}})\slice{1}{\first_{#1}\!\!-\!\!1}}}
\newcommand{\flood}{\textit{flood}}
\newcommand{\yflood}{y^\flood}
\newcommand{\sflood}{s^\flood}
\newcommand{\eflood}{e^\flood}
\newcommand{\Pflood}{P^\flood}
\renewcommand{\fair}{\textit{fair}}
\newcommand{\yfair}{y^\fair}
\newcommand{\sfair}{s^\fair}
\newcommand{\efair}{e^\fair}
\newcommand{\Pfair}{P^\fair}
\newcommand{\evac}{\textit{evac}}
\newcommand{\yevac}{y^\evac}
\newcommand{\sevac}{s^\evac}
\newcommand{\eevac}{e^\evac}
\newcommand{\Pevac}{P^\evac}
\newcommand{\qloop}{q}
\newcommand{\eloop}{e}


% add line breaks to table cells, to labels of tikz 
% usage: \specialcell{first line \\ second line} 
\newcommand{\specialcellC}[2][c]{%
  \begin{tabular}[#1]{@{}c@{}}#2\end{tabular}}
\newcommand{\specialcellL}[2][c]{%
  \begin{tabular}[#1]{@{}l@{}}#2\end{tabular}}


\newcommand{\CURRENT}{\hl{CURRENT}}

%% Latex `sugar' extensions
\newcommand{\li}{\begin{itemize}}
\newcommand{\il}{\end{itemize}}
\renewcommand{\-}{\item}

\newcommand{\myparagraphraw}[1]{\smallskip\noindent{\bf#1}}
\newcommand{\myparagraph}[1]{\myparagraphraw{#1.}}



\NewEnviron{tikzLTS}{%
  \begin{tikzpicture}[node distance=2cm,inner sep=1pt,minimum size=0.5mm,bend angle=20]
	 	\tikzstyle{proc} = [rectangle,draw=black,fill=green!20,thick,inner sep=10pt]
	  	\tikzstyle{state} = [circle,draw=black,thick,inner sep=3pt]
	  	\tikzstyle{noproc} = [circle]
	  	\tikzstyle{lbl} = [rectangle,node distance=2cm]
  		\tikzstyle{pre} = [ <-,shorten <=2pt,shorten >=2pt, >=stealth', semithick]
	  	\tikzstyle{post} = [ ->,shorten <=2pt,shorten >=2pt, >=stealth', semithick]
    \BODY
  \end{tikzpicture}
}

\NewEnviron{tikzPath}{%
  \begin{tikzpicture}	
  	\tikzstyle{pstate} = [circle, fill=black,thick, inner sep=2pt, minimum size=2mm]
    \tikzstyle{hiddenstate} = [circle]
  	\tikzstyle{trans-notsched} = [ ->,shorten <=2pt,shorten >=2pt, >=stealth', semithick]
  	\tikzstyle{trans-sched} = [ ->,shorten <=2pt,shorten >=2pt, >=stealth', very thick] 
    \BODY
    \end{tikzpicture}
}


