
We now focus on the NP lower bound of \pbBReachSM. 
% We
% recall the 3-satisfiability (3-SAT) problem which is
% NP-complete~\cite{DBLP:conf/coco/Karp72}.

% \begin{definition}[3-SAT] The 3-satisfiability problem is the following decision
%   problem:
%   \begin{itemize}
%   \item[] Input: a set of $n$ variables $\booleanvariablegeneric_1, \dots,
%     \booleanvariablegeneric_n$ and a set of $m$ disjunctive clauses
%     $\clausegeneric_1, \dots, \clausegeneric_m$. Each clause contains up to 3
%     literals (a variable or its negation).
% %  \item[] Output: does there exists an assignment for the variables satisfying
% %  all clauses ?
%   \item[] Output: is there a variable assignment satisfying all clauses?
% %does there exists an assignment for the variables satisfying
% %  all clauses ?
%   \end{itemize}
% \end{definition}

% \begin{theorem}
%   3-SAT problem is NP-complete \cite{DBLP:conf/coco/Karp72}.
% \end{theorem}

\iffull
\input{picture_sight}
\else
\input{picture_sight_small}
\fi

\begin{proposition} \label{prop:sm:lb:breach}
  \pbBReachSM is NP-hard for a fixed execution length $\ell\geq 3$.
\end{proposition}
\begin{proof}
  The proof is by polynomial time reduction from 3-SAT problem (see \cite{DBLP:conf/coco/Karp72}).
  Given a 3-SAT instance, set of clauses $c_1,\ldots,c_m$ with variables~$x_1,\ldots,x_n$,
  we describe the
  construction of an instance $(G, c)$ of \pbBReachSM \linebreak with~$k=n+m$ agents.
%  \todo{Possible confusion between~$c$ and~$c_1,\ldots,c_m$}


% We construct the graph $G=\langle V,E,C\rangle$ from an instance of 3-SAT.
%The topological graph contains a node for each literal, a goal node for each variable, a node and a goal node for each clause. Then, a clause exactly communicates with the literal it is
  %associated with. In order to reach a clause, an agent must be placed at one of
 % the literals of the former to preserve communication.
  %
  The topological graph $G=\langle\setnodes, \moves, \coms \rangle$ is constructed
  as follows. We start by placing the base $\basenode$ from which the agents start
  their mission.

  Please recall that a sight-moveable graph is also a neighbor-communicable graph so
  all movements edges are also communication edges in the construction below
  even if not explicitly stated.

  For each variable $\booleanvariablegeneric$, we construct a gadget composed of
  5 nodes connected to the base depicted in Figure \ref{fig:Gvar}:  nodes
  $\booleanvariablegeneric$, $\neg \booleanvariablegeneric$, staging nodes
  $n_\booleanvariablegeneric$, $n_{\neg \booleanvariablegeneric}$ and a
  \emph{goal} node $g_\booleanvariablegeneric$. We add movement edges from $B$
  to $n_\booleanvariablegeneric$, from $n_\booleanvariablegeneric$ to
  $\booleanvariablegeneric$ and from $\booleanvariablegeneric$ to
  $g_\booleanvariablegeneric$ (resp. from $B$ to $n_{\neg
  \booleanvariablegeneric}$, from $n_{\neg \booleanvariablegeneric}$ to $\neg
  \booleanvariablegeneric$ and from $\neg \booleanvariablegeneric$ to
  $g_\booleanvariablegeneric$). As for the communication, the node
  $\booleanvariablegeneric$ (res. $\neg \booleanvariablegeneric$) communicates
  with the base. %The staging nodes are not labeled in the figures for clarity.

  For each clause $\clausegeneric$, we construct a gadget composed of 3
  nodes depicted in Figure \ref{fig:Gcla}. We create a node $\clausegeneric$, a
  staging node $n_\clausegeneric$ and a goal node $g_\clausegeneric$. We add
  movement edges from $B$ to $n_c$, from $n_\clausegeneric$ to $\clausegeneric$
  and from $\clausegeneric$ to $g_\clausegeneric$. 
  %As in the variable gadget,
  %the node $\clausegeneric$ communicates with the base. 
  The communication between a clause $\clausegeneric$ and a literal
  $\booleanvariablegeneric$ or $\neg \booleanvariablegeneric$ is dictated by the
  existence of the literal in the clause: $\clausegeneric_i\coms
  \booleanvariablegeneric_j$ if and only if~$\booleanvariablegeneric_j \in
  \clausegeneric_i$; and $\clausegeneric_i\coms \lnot \booleanvariablegeneric_j$
  if and only if~$\lnot \booleanvariablegeneric_j \in \clausegeneric_i$.

  We add movement edges from
  $g_{\booleanvariablegeneric_i}$ to $g_{\booleanvariablegeneric_{i+1}}$,
  and from $g_{\clausegeneric_i}$ to~$g_{\clausegeneric_{i+1}}$ for all~$1 \leq i < n$,
  as well as we from
   $g_{\booleanvariablegeneric_n}$ to $g_{\clausegeneric_1}$.
   Last, we add a fully connected path containing 3 fresh nodes from $g_{\booleanvariablegeneric_1}$ to the base such that $g_{\booleanvariablegeneric_1} \coms \basenode$,
   in the sense that all nodes of this path have communication edges between them.
  This translation is polynomial in the number of clauses and variables.
  The construction is depicted in Figure~\ref{fig:cons}.
  The snake-like path from $g_{\booleanvariablegeneric_1}$ to $\basenode$ is the
  fully connected path.

  From a 3-SAT instance, one can construct the graph $G$ and ask for an
  execution of length 3 to reach the configuration \linebreak $\langle
  g_{\booleanvariablegeneric_1}, \dots, g_{\booleanvariablegeneric_n},
  g_{\clausegeneric_1}, \dots, g_{\clausegeneric_m}\rangle$.


  \iffull
  \begin{fact}
    $G$ is a sight-moveable topological graph.
  \end{fact}
  \begin{proof}
    One can see that the single communication edges created by the construction,
    apart from the ones induced by the movement, are the communication between
    the base $B$ and the nodes $\booleanvariablegeneric_i$ and $\neg
    \booleanvariablegeneric_i$. Hence, a path does exist under the communication
    of $B$ to reach $\booleanvariablegeneric_i$.
  \end{proof}

  Now let us prove that a 3-SAT instance is satisfiable iff there exists an
  execution of at most 3 steps in the graph $G$.

  ($\Rightarrow$) We show that if a 3-SAT instance is satisfiable then there
  exists an execution of at most 3 steps in the graph $G$ built from it. Let
  $val$ be a truth assignment which satisfies the instance.
  Recall that there are~$n+m$ agents.
  The first step of the execution consists in moving an agent in each~$n_{c_i}$,
  and for each variable~$x_j$, moving one agent to~$n_{x_j}$ if the $val(x_j)=1$
  and to~$n_{\lnot x_j}$ otherwise.
  Note that all staging nodes communicate with~$\basenode$ since the graph
  is neighbor-communicable.

  In the second step, all agents progress to their unique successors other than~$\basenode$.
  While all nodes~$x_j$ and~$\lnot x_j$ are connected to~$\basenode$,
  a node~$c_i$ is connected to~$\basenode$ if and only if there is an
  agent in one of its literals. This is the case since $val$ satisfies the formula.
  In the third step of the execution, agents go to states~$g_{x_j}$ and~$g_{c_i}$.
  Here, the connection with the base is ensured since~$g_{x_1}$ is connected
  to it, and~$g_{x_2}$ is connected to~$g_{x_1}$, $g_{x_3}$ is connected to~$g_{x_2}$ and
  so on.

  This execution is thus a solution of \pbBReachSM with bound $\ell=3$.

  ($\Leftarrow$) We now show that if there exists an execution of at most 3
  steps in the graph $G$ constructed from a 3-SAT instance, then the instance is
  satisfiable. Assume we have an execution $e$ of at most 3 steps with the last
  configuration being $\langle g_{\booleanvariablegeneric_1}, \dots,
  g_{\booleanvariablegeneric_n}, g_{\clausegeneric_1}, \dots,
  g_{\clausegeneric_m}\rangle$.

  The only shortest path from $\basenode$ to~$g_{c_i}$ is of length~$3$ and goes through
  $n_{c_i}$. For states $g_{x_j}$, the only shortest paths are also of length~$3$
  and go through either $n_{x_j}$ or~$n_{\lnot x_j}$. Thus, in order to reach the given
  target configuration, at the initial step, agents must cover the states~$n_{c_i}$
  and either~$n_{x_j}$ or~$n_{\lnot x_j}$ for all $i,j$. At the second step,
  following the above mentioned shortest paths, agents will be at states~$c_i$
  and either~$x_j$ or~$\lnot x_j$ depending on the staging nodes they were occupying.
  The last step is the target configuration.
  Since the agents are connected at the second, it follows that for each clause~$c_i$,
  the state corresponding to some literal of~$c_i$ is occupied by an agent.
  Thus the valuation on variables encoded by the choices of the agents satisfies the
  3-SAT instance.

  \else
  The rest of the proof is given in the long version.
  \fi
  % First, given the length of the execution, one
  % can observe that for each variable $\booleanvariablegeneric_i$ only the node
  % $\booleanvariablegeneric_i$ or $\neg \booleanvariablegeneric_i$ has been
  % visited, with $0<i\leq n$. Second, the $m$ agents in the clause nodes
  % $g_\clausegeneric$ required an agent to be located at one of the variable
  % nodes connected to it. Given that a clause is only connected to its literals,
  % an agent can access a clause iff another is placed at a node which satisfies
  % it.
\end{proof}

From Propositions~\ref{prop:dir:ub:bcover-breach} and~\ref{prop:sm:lb:breach}, we have:

\begin{theorem} \label{th:sm:compl:breach}
  \pbBReachSM is NP-complete.
\end{theorem}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
