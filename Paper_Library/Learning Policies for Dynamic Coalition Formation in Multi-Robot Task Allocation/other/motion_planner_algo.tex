\begin{algorithm}[t]
\small
\caption{\small Robot Motion Control} \label{alg:robot_motion_control}
    \DontPrintSemicolon
    \SetKwFunction{FMotionPlanning}{MotionPlanning}
    \SetKwProg{Fn}{Function}{:}{}
    \SetKwFunction{proc}{NextRobotPosition}
    \SetKwProg{myproc}{Procedure}{:}{}

    \Fn{\FMotionPlanning{$p_{i,t}, a_{i,t}$}} {
        Using the A* algorithm, find a collision-free path $(\bar p_1, \cdots, \bar p_n)$ where $\bar p_1 = p_{i,t}$ and $\bar p_n = a_{i,t}$.
        
        \Return $(\bar p_1, \cdots, \bar p_n)$
        
    }
    \myproc{\proc{$p_{i,t}, o_{i,t}$}} {
    $a_{i,t} \sim \pi_\phi (\cdot | o_{i,t})$
    \tcp*[l]{\footnotesize{draw a task location using the learned policy $\pi_\phi$ with local observation $o_{i,t}$.}}

    $(\bar p_1, \cdots, \bar p_n)$ = \FMotionPlanning($p_{i,t}, a_{i,t}$)   

    Generate an intention map with $(\bar p_1, \cdots, \bar p_n)$ and share it with neighboring robots.

    $p_{i,t+1} \gets \bar p_2$ 
    \tcp*[l]{\footnotesize{assign $\bar p_2$ as the robot's next position to move to.}}
    
    \Return $p_{i,t+1}$
    }
\end{algorithm}