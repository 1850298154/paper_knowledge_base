%!TEX root=../main.tex

\begin{figure}
	\centering
	\begin{subfigure}[t]{0.17\textwidth}
		\scalebox{0.9}{
			\execution{3}{
				\figev{1}{$\acq(\LockColorOne{\lk_1})$}
				\figev{1}{$\acq(\LockColorTwo{\lk_2})$}
				\figev{1}{$\rel(\LockColorTwo{\lk_2})$}
				\figev{1}{$\acq(\LockColorTwo{\lk_2})$}
				\figev{1}{$\wt(y)$}
				\figev{1}{$\rel(\LockColorTwo{\lk_2})$}
				\figev{1}{$\rel(\LockColorOne{\lk_1})$}
				\figev{2}{$\acq(\LockColorThree{\lk_3})$}
				\figev{2}{$\wt(x)$}
				\figev{2}{$\rd(y)$}
				\figev{2}{$\rel(\LockColorThree{\lk_3})$}
				\figev{3}{$\acq(\LockColorTwo{\lk_2})$}
				\figev{3}{$\acq(\LockColorThree{\lk_3})$}
				\figev{3}{$\rd(x)$}
				\figev{3}{$\rel(\LockColorThree{\lk_3})$}
				\figev{3}{$\acq(\LockColorOne{\lk_1})$}
			}
		}
	\end{subfigure}
	\hspace*{\fill}
	\begin{subfigure}[t]{0.17\textwidth}
		\scalebox{0.9}{
			\execution{3}{
				\figevoffset{16}{3}{$\wt(v)$}
				\figevoffset{16}{3}{$\rel(\LockColorOne{\lk_1})$}
				\figevoffset{16}{3}{$\acq(\LockColorOne{\lk_1})$}
				\figevoffset{16}{3}{$\rel(\LockColorOne{\lk_1})$}
				\figevoffset{16}{3}{$\rel(\LockColorTwo{\lk_2})$}
				\figevoffset{16}{2}{$\acq(\LockColorFour{\lk_4})$}
				\figevoffset{16}{2}{$\acq(\LockColorOne{\lk_1})$}
				\figevoffset{16}{2}{$\wt(z)$}
				\figevoffset{16}{2}{$\rd(v)$}
				\figevoffset{16}{2}{$\rel(\LockColorOne{\lk_1})$}
				\figevoffset{16}{2}{$\rel(\LockColorFour{\lk_4})$}
				\figevoffset{16}{1}{$\acq(\LockColorOne{\lk_1})$}
				\figevoffset{16}{1}{$\acq(\LockColorTwo{\lk_2})$}
				\figevoffset{16}{1}{$\rd(z)$}
				\figevoffset{16}{1}{$\rel(\LockColorTwo{\lk_2})$}
				\figevoffset{16}{1}{$\rel(\LockColorOne{\lk_1})$}
			}
		}
	\end{subfigure}
	\hspace*{\fill}
	\begin{subfigure}[t]{0.35\textwidth}
		\begin{tikzpicture}[baseline=-180pt]
			\tikzset{rectangle/.append style={draw=black}}
			\scalebox{0.84}{
				\def\xstep{2.2}
				\def\ystep{0.5}
				\node[align=left] (tt1) at (0*\xstep, -3.5){
					$
					\eta_1=
					\tuple{t_1, \LockColorTwo{\lk_2}, \{ \LockColorOne{\lk_1} \},
						\sequence{e_2, e_4, e_{29}}}
					$\\
					$
					\eta_2=
					\tuple{
						t_2, \LockColorOne{\lk_1}, \{ \LockColorFour{\lk_4} \},
						\sequence{e_{23}}}
					$\\
					$
					\eta_3=
					\tuple{
						t_3, \LockColorOne{\lk_1}, \{ \LockColorTwo{\lk_2} \},
						\sequence{e_{16}, e_{19}}}
					$\\
					$
					\eta_4=
					\tuple{
						t_3, \LockColorThree{\lk_3}, \{ \LockColorTwo{\lk_2} \},
						\sequence{e_{13}}}
					$
				};
				
				\node[align=left] (tt2) at (0*\xstep, -4.8){
					$\abst{D}=\pattern{\eta_1, \eta_3}$
				};
				
				\node[align=left] (tt3) at (-0.5*\xstep, -6){
					$D_1=\pattern{e_2, e_{16}}$\\
					$D_2=\pattern{e_2, e_{19}}$\\
					$D_3=\pattern{e_4, e_{16}}$\\
				};
				\node[align=left] (tt4) at (0.5*\xstep, -6){
					$D_4=\pattern{e_4, e_{19}}$\\
					$D_5=\pattern{e_{29}, e_{16}}$\\
					$D_6=\pattern{e_{29}, e_{19}}$\\
				};
			}
		\end{tikzpicture}
	\end{subfigure}
	% \vspace{-40pt}
	\caption{
		A trace $\tr_3$, its abstract acquires $\eta_i$, unique abstract deadlock pattern $\abst{D}$, concrete patterns $D_i\in \abst{D}$. 
	}
	% \vspace{-10pt}
	\figlabel{syncp_example}
\end{figure}
