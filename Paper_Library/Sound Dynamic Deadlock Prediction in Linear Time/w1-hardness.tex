%!TEX root = main.tex

\subsection{$\W{1}$-hardness for Deadlock Prediction}
\seclabel{w1-hardness}

Finally, we prove that predicting deadlocks is a $\W{1}$-hard problem parameterized by the number of threads $\NumThreads$.

\wonehardness*
\begin{proof}
    We establish a simple reduction from the problem of data-race prediction to the problem of predicting deadlocks of size $2$.
	Given a trace $\tr$ and a deadlock pattern $D=\pattern{\acq_1, \acq_2}$ of size $2$, we choose a fresh variable $x\not \in \vars{\tr}$, and construct two events $\wt_1=\ev{\ThreadOf{\acq_1}, \wt(x)}$ and $\wt_2=\ev{\ThreadOf{\acq_2}, \wt(x)}$, where $x$.
	We construct a trace $\tr'$ by replacing $\acq_1$ and $\acq_2$ in $\tr$ with $\wt_1$ and $\wt_2$, respectively.
	It is straightforward to verify that any correct $\rho$ reordering of $\tr'$ that witnesses $(\wt_1, \wt_2)$ as a data race is also a correct reordering of $\tr$ that witnesses the deadlock $(\acq_1, \acq_2)$.
	Since predicting data races is $\W{1}$-hard on $\NumThreads$\cite{Mathur2020b}, the desired result follows.
\end{proof}

