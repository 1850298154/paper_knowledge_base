%!TEX root = main.tex
\makeatletter
\newcommand{\pnrelbar}{%
\linethickness{\dimen2}%
\sbox\z@{$\m@th\prec$}%
\dimen@=1.1\ht\z@
\begin{picture}(\dimen@,.4ex)
\roundcap
\put(0,.2ex){\line(1,0){\dimen@}}
\put(\dimexpr 0.5\dimen@-.2ex\relax,0){\line(1,1){.4ex}}
\end{picture}%
}

\newcommand{\precneq}{\mathrel{\vcenter{\hbox{\text{\prec@neq}}}}}
\newcommand{\prec@neq}{%
\dimen2=\f@size\dimexpr.04pt\relax
\oalign{%
\noalign{\kern\dimexpr.2ex-.5\dimen2\relax}
$\m@th\prec$\cr
\noalign{\kern-.5\dimen2}
\hidewidth\pnrelbar\hidewidth\cr
}%
}
\makeatother

\newenvironment{myparagraph}[1]{\vspace*{0.38em}\noindent{\bf #1.}}{}

\SetInd{0.3em}{0.2em}

%\newlist{compactenum}{enumerate}{3} % 3 is max-depth
%\setlist[compactenum]{label=\arabic*., nosep,leftmargin=*}
%\crefname{compactenumi}{Item}{Items}
\setlist[itemize]{nosep,leftmargin=*}
\setlist[enumerate]{label=\arabic*., nosep,leftmargin=*}

% Labels and references
\newcommand{\LowerSet}{\downarrow}
\newcommand{\figlabel}[1]{\label{fig:#1}}
\newcommand{\figref}[1]{Fig.~\ref{fig:#1}}
\newcommand{\seclabel}[1]{\label{sec:#1}}
\newcommand{\secref}[1]{Section~\ref{sec:#1}}
\newcommand{\exlabel}[1]{\label{ex:#1}}
\newcommand{\exref}[1]{Example~\ref{ex:#1}}
\newcommand{\deflabel}[1]{\label{def:#1}}
\newcommand{\defref}[1]{Definition~\ref{def:#1}}
\newcommand{\problabel}[1]{\label{prob:#1}}
\newcommand{\probref}[1]{Problem~\ref{prob:#1}}
\newcommand{\thmlabel}[1]{\label{thm:#1}}
\newcommand{\thmref}[1]{Theorem~\ref{thm:#1}}
\newcommand{\proplabel}[1]{\label{prop:#1}}
\newcommand{\propref}[1]{Proposition~\ref{prop:#1}}
\newcommand{\lemlabel}[1]{\label{lem:#1}}
\newcommand{\lemref}[1]{Lemma~\ref{lem:#1}}
\newcommand{\corlabel}[1]{\label{cor:#1}}
\newcommand{\corref}[1]{Corollary~\ref{cor:#1}}
\newcommand{\itmlabel}[1]{\label{itm:#1}}
\newcommand{\itmref}[1]{\ref{itm:#1}}
\newcommand{\equlabel}[1]{\label{eq:#1}}
\newcommand{\equref}[1]{Equation~(\ref{eq:#1})}
\newcommand{\applabel}[1]{\label{app:#1}}
\newcommand{\appref}[1]{Appendix~\ref{app:#1}}
% \newcommand{\appref}[1]{ the Appendix}
\newcommand{\algolabel}[1]{\label{algo:#1}}
\newcommand{\algoref}[1]{Algorithm~\ref{algo:#1}}
\newcommand{\linelabel}[1]{\label{line:#1}}
\newcommand{\lineref}[1]{Line~\ref{line:#1}}
\newcommand{\linerangeref}[2]{Lines~\ref{line:#1}-\ref{line:#2}}
\newcommand{\secrangeref}[2]{Sections~\ref{sec:#1}-\ref{sec:#2}}

%% Math
\newcommand{\nats}{\mathbb{N}}

\newcommand{\setofthreads}{\mathsf{Threads}}
\newcommand{\threads}[1]{\setofthreads_{#1}}
\newcommand{\locks}[1]{\mathsf{Locks}_{#1}}
\newcommand{\vars}[1]{\mathsf{Vars}_{#1}}
\newcommand{\events}[1]{\mathsf{Events}_{#1}}
\newcommand{\wevents}[1]{\mathsf{WEvents}_{#1}}
%\newcommand{\reads}[1]{\mathsf{Reads}_{#1}}
%\newcommand{\writes}[1]{\mathsf{Writes}_{#1}}
\newcommand{\Reads}[1]{\mathsf{Rds}(#1)}
\newcommand{\Writes}[1]{\mathsf{Wts}(#1)}
\newcommand{\accesses}[1]{\mathsf{Accesses}_{#1}}
\newcommand{\acquires}[1]{\mathsf{Acquires}_{#1}}
\newcommand{\releases}[1]{\mathsf{Releases}_{#1}}
\newcommand{\forks}[1]{\mathsf{Forks}_{#1}}
\newcommand{\joins}[1]{\mathsf{Joins}_{#1}}
% \renewcommand{\next}[1]{\mathsf{next}_{#1}}
\newcommand{\match}[1]{\mathsf{match}_{#1}}
\newcommand{\lheld}[1]{\mathsf{HeldLks}_{#1}}
\newcommand{\nestingdepth}[1]{\mathsf{LNDepth}_{#1}}
% \newcommand{\last}[1]{\mathsf{last}_{#1}}
\newcommand{\last}[2]{\mathsf{last}^{#1}_{#2}}
\newcommand{\RF}{\operatorname{RF}}
\newcommand{\rf}[1]{\mathsf{rf}_{#1}}
\newcommand{\Otilde}{\widetilde{O}}
% \newcommand{\SyncPDOffline}{\textsf{\tt SyncPD}\xspace}
\newcommand{\SyncPDOffline}{\textsf{\tt SPDOffline}\xspace}
% \newcommand{\SyncPDOnline}{\textsf{\tt SyncPD2}\xspace}
\newcommand{\SyncPDOnline}{\textsf{\tt SPDOnline}\xspace}
\newcommand{\SyncPDOnlineSchedule}{\textsf{\tt SyncPD2-S}\xspace}
\newcommand{\dirk}{\textsf{\tt Dirk}\xspace}
\newcommand{\seqc}{\textsf{\tt SeqCheck}\xspace}
\newcommand{\dlfuzzer}{\textsf{\tt DeadlockFuzzer}\xspace}
\newcommand{\dlfshort}{\textsf{\tt DF}\xspace}
\newcommand{\syncpdshort}{\textsf{\tt SPD}\xspace}
\newcommand{\iglshort}{\textsf{\tt IGL}\xspace}
\newcommand{\normalshort}{\textsf{\tt Normal}\xspace}
\newcommand{\syncpdshortinstr}{\textsf{\tt SPD-I}\xspace}
\newcommand{\dlfshortinstr}{\textsf{\tt DF-I}\xspace}
\newcommand{\syncpdshortinstranalysis}{\textsf{\tt SPD-I+A}\xspace}
\newcommand{\dlfshortinstranalysis}{\textsf{\tt DF-I+A}\xspace}

\newcommand{\acq}{\mathtt{acq}}
\newcommand{\rel}{\mathtt{rel}}
\newcommand{\rd}{\mathtt{r}}
\newcommand{\wt}{\mathtt{w}}
\newcommand{\fork}{\mathtt{fork}}
\newcommand{\join}{\mathtt{join}}
\newcommand{\cs}{\mathtt{cs}}

\newcommand{\Bacq}{\mathtt{\bf acq}}
\newcommand{\Brel}{\mathtt{\bf rel}}
\newcommand{\Brd}{\mathtt{\bf r}}
\newcommand{\Bwt}{\mathtt{\bf w}}
\newcommand{\Bfork}{\mathtt{\bf fork}}
\newcommand{\Bjoin}{\mathtt{\bf join}}
\newcommand{\Bcs}{\mathtt{\bf cs}}


% \newcommand{\trbegin}{\rhd}
% \newcommand{\trend}{\lhd}
% \newcommand{\trbeginfig}{\texttopcorner\textcorner}
% \newcommand{\trbeginfig}{\;\raisebox{1.3mm}{\rule{0.4pt}{1.14mm}\raisebox{1mm}{\rule{4mm}{0.4pt}}\rule{0.4pt}{1.14mm} } }
% \newcommand{\trendfig}{\;\raisebox{-0.075mm}{\rule{0.4pt}{1.14mm}\rule{4mm}{0.4pt}\rule{0.4pt}{1.14mm} } }
% \newcommand{\trbegintext}{\;\raisebox{0mm}{\rule{1pt}{1.35mm}\raisebox{1mm}{\rule{3mm}{1pt}}\rule{1pt}{1.35mm} } }
% \newcommand{\trendtext}{\;\raisebox{-0.075mm}{\rule{1pt}{1.35mm}\rule{3mm}{1pt}\rule{1pt}{1.35mm} } }
% \newcommand{\trbegin}{{\protect\trbegintext}\!}
% \newcommand{\trend}{{\protect\trendtext}\!}
\newcommand{\trbegin}{\rhd}
\newcommand{\trend}{\lhd}
\newcommand{\trbeginfig}{\rhd}
\newcommand{\trendfig}{\lhd}
\newcommand{\sync}{\mathtt{sync}}
\newcommand{\lk}{\ell}
\newcommand{\ev}[1]{\langle #1\rangle}
\newcommand{\tr}{\sigma}
\newcommand{\conf}{\asymp}
\newcommand{\comp}{\circ}
\newcommand{\wrap}{\mathtt{wrap}}
\newcommand{\clear}{\mathtt{clear}}
\newcommand{\src}{\mathtt{src}}
\newcommand{\thread}{t}
\newcommand{\ThreadOf}[1]{\operatorname{thread}(#1)}
\newcommand{\op}{\mathsf{op}}
\newcommand{\OpOf}[1]{\operatorname{op}(#1)}
\newcommand{\trnsc}{\mathsf{txn}}
\newcommand{\crit}[1]{\mathsf{CS}_{#1}}
\newcommand{\addfresh}{\mathsf{addFresh}}
\newcommand{\W}[1]{\mathsf{W[#1]}}
\newcommand{\NP}{\mathsf{NP}}
\newcommand{\poly}[1]{\text{poly}(#1)}
\newcommand{\Lang}{\mathcal{L}}
\newcommand{\EQ}{\mathcal{L'}}
\newcommand{\Transducer}{\mathcal{A}}

\newcommand{\Paragraph}[1]{\smallskip\noindent{\bf #1.}}
\newcommand{\SubParagraph}[1]{\smallskip\noindent{\em #1.}}
\newcommand{\RFPoset}{\mathcal{P}}
\newcommand{\RFPosetQ}{\mathcal{Q}}
\newcommand{\RFPosetS}{\mathcal{S}}
\newcommand{\Unordered}[4]{#1\parallel^{#2}_{#3} #4}
\newcommand{\Ordered}[4]{#1 \not \parallel^{#2}_{#3} #4}
\newcommand{\Project}{|}
\newcommand{\Refines}{\sqsubseteq}
\newcommand{\SeqTrace}{\pi}
\newcommand{\ov}{\overline}
\newcommand{\ReadTriplets}[1]{\mathsf{Triplets(#1)}}
\newcommand{\DistinguishedTriplet}{\lambda}
\newcommand{\NumAcquires}{\mathcal{A}}
\newcommand{\NestingDepth}{d}
\newcommand{\NumVariables}{\mathcal{V}}
\newcommand{\NumThreads}{\mathcal{T}}
\newcommand{\NumEvents}{\mathcal{N}}
\newcommand{\NumLocks}{\mathcal{L}}

\newcommand{\NumRedEvents}{\ov{\mathcal{N}}}
\newcommand{\NumRedLocks}{\ov{\mathcal{L}}}
\newcommand{\NumRedAcquires}{\ov{\mathcal{A}}}
\newcommand{\NumRedVariables}{\ov{\mathcal{V}}}
\newcommand{\NumRedThreads}{\ov{\mathcal{T}}}


\newcommand{\set}[1]{\{#1\}}
\newcommand{\setpred}[2]{\{#1 \,|\, #2\}}
\newcommand{\tuple}[1]{\langle #1 \rangle}
\newcommand{\powset}[1]{\mathcal{P}(#1)}

\DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
\DeclareFontShape{U}{mathb}{m}{n}{
<5> <6> <7> <8> <9> <10> gen * mathb
<10.95> mathb10 <12> <14.4> <17.28> <20.74> <24.88> mathb12
}{}
\DeclareSymbolFont{mathb}{U}{mathb}{m}{n}
% \DeclareMathSymbol{\sqsubsetneq}    {3}{mathb}{"88}
% \DeclareMathSymbol{\varsqsubsetneq} {3}{mathb}{"8A}
% \DeclareMathSymbol{\varsqsubsetneqq}{3}{mathb}{"92}
\DeclareMathSymbol{\sqsubsetneq}    {3}{mathb}{"8A}

\newcommand{\ord}[2]{\leq^{#1}_{\mathsf{#2}}}
\newcommand{\notord}[2]{{\not\leq}^{#1}_{\mathsf{#2}}}
\newcommand{\strictord}[2]{<^{#1}_{\mathsf{#2}}}
\newcommand{\trord}[1]{\leq^{#1}_{\mathsf{tr}}}
\newcommand{\stricttrord}[1]{<^{#1}_{\mathsf{tr}}}
\newcommand{\tho}[1]{\leq^{#1}_{\mathsf{TO}}}
\newcommand{\TO}{TO}
\newcommand{\stricttho}[1]{<^{#1}_{\mathsf{TO}}}
\newcommand{\nottho}[1]{\not\leq^{#1}_{\mathsf{TO}}}
% \newcommand{\stricttrord}[1]{<^{#1}_{\mathsf{tr}}}
\newcommand{\hb}[1]{\leq^{#1}_{\mathsf{HB}}}
\newcommand{\sdp}[1]{\leq^{#1}_{\mathsf{SDP}}}
\newcommand{\chb}[1]{\leq^{#1}_{\mathsf{CHB}}}
%\newcommand{\thb}[1]{<^{#1}_{\mathsf{THB}}}
\newcommand{\thb}[1]{\lessdot^{#1}_{\mathsf{Txn}}}
% \newcommand{\pth}[1]{\stackrel{*, #1}{\longrightarrow}}
\newcommand{\pth}[1]{\stackrel{*}{\longrightarrow_{#1}}}
\newcommand{\nedg}[1]{\lessdot^{#1}_{\mathsf{E}}}
\newcommand{\cp}[1]{\leq^{#1}_{\mathsf{CP}}}
\newcommand{\wcp}[1]{\leq^{#1}_{\mathsf{WCP}}}
\newcommand{\shb}[1]{\leq^{#1}_{\mathsf{SHB}}}
\newcommand{\notwcp}[1]{\not\leq^{#1}_{\mathsf{WCP}}}
\newcommand{\notsdp}[1]{\not\leq^{#1}_{\mathsf{SDP}}}
\newcommand{\strictwcp}[1]{\prec^{#1}_{\mathsf{WCP}}}
\newcommand{\strictshb}[1]{\strictord{#1}{\mathsf{SHB}}}
\newcommand{\ccp}[1]{\leq^{#1}_{\mathsf{DCP}}}
\newcommand{\notccp}[1]{\not\leq^{#1}_{\mathsf{DCP}}}
\newcommand{\strictccp}[1]{\prec^{#1}_{\mathsf{DCP}}}
\newcommand{\conc}[2]{\,||^{#1}_{\mathsf{#2}}\,}
\newcommand{\wcpconc}[1]{\,||^{#1}_{\mathsf{WCP}}\,}
\newcommand{\ccpconc}[1]{\,||^{#1}_{\mathsf{DCP}}\,}
\newcommand{\prev}[1]{\textsf{pred}_{#1}}
\newcommand{\trf}[1]{\leq^{#1}_{\mathsf{TRF}}}

\newcommand{\ccprank}[2]{\mathsf{rank}_\mathsf{DCP}^{#1}(#2)}
\newcommand{\wcprank}[2]{\mathsf{rank}_\mathsf{WCP}^{#1}(#2)}

\newcommand{\synctr}[1]{\mathsf{syncTrace}(#1)}
\newcommand{\unsynctr}[1]{\mathsf{unSyncTrace}(#1)}
\newcommand{\synctrev}[2]{\mathsf{syncTrace}^{#2}(#1)}
\newcommand{\freshvar}{\mathsf{fvar}}
\newcommand{\fsync}{\mathsf{first}\sync}
\newcommand{\lsync}{\mathsf{last}\sync}

\newcommand{\lw}[1]{\mathsf{lw}_{#1}}
\newcommand{\RFTrace}[1]{\lw{#1}}
\newcommand{\proj}[2]{#1|_{#2}}
\newcommand{\pattern}[1]{\tuple{#1}}
\newcommand{\sequence}[1]{[#1]}

\newcommand{\rtext}[1]{\textcolor{orange}{\sout{#1}}}
\newcommand{\atext}[1]{\textcolor{blue}{#1}}
\newcommand{\qtext}[1]{\textcolor{green}{#1}}

\def \darkred {black!20!red}
\def \darkgreen {black!40!green}

\newcommand{\LockColorOne}[1]{\textcolor{blue}{#1}}
\newcommand{\LockColorTwo}[1]{\textcolor{\darkred}{#1}}
\newcommand{\LockColorThree}[1]{\textcolor{\darkgreen}{#1}}
\newcommand{\LockColorFour}[1]{\textcolor{brown}{#1}}

\newcommand{\Andreas}[1]{\textcolor{blue}{AP:~#1}}
\newcommand{\ucomment}[1]{\textcolor{red}{#1}}
\newcommand{\hunkar}[1]{\textcolor{\darkgreen}{#1}}
\newcommand{\hcomment}[1]{\textcolor{orange}{#1}}
%\newcommand\mycommfont[1]{\ttfamily{#1}}
\newcommand\mycommfont[1]{\footnotesize\ttfamily\textcolor{gray}{#1}}
\newcommand{\cre}{\mathsf{CR}}
\SetCommentSty{mycommfont}

\renewcommand{\thefootnote}{\fnsymbol{footnote}}

\renewcommand{\emptyset}{\varnothing}

%\newtheorem{theorem}{Theorem}
%\newtheorem{lemma}[theorem]{Lemma}
%\newtheorem{claim}[theorem]{Claim}
%\newtheorem{corollary}[theorem]{Corollary}
%\newtheorem{proposition}[theorem]{Proposition}
%\newtheorem{conjecture}[theorem]{Conjecture}

\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{example}{Example}
% \newtheorem{definition}{Definition}
\newtheorem{problem}{Problem}
\newtheorem{conjecture}{Conjecture}
% \newtheorem{observation}{Observation}

\theoremstyle{remark}
\newtheorem{remark}{Remark}

\newcommand{\closurefun}{\texttt{ComputeSPIdeal}\xspace}
\newcommand{\racefun}{\texttt{checkRace}\xspace}


\input{exec_macros}
\input{pseudocode_macros}

% \newcommand{\trzero}{\rho_1}
% \newcommand{\trone}{\rho_2}
% \newcommand{\trtwo}{\rho_3}
% \newcommand{\trthree}{\rho_4}
% \newcommand{\trfour}{\rho_8}
% \newcommand{\trfive}{\rho_9}
% \newcommand{\trsix}{\rho_6}
% \newcommand{\trseven}{\rho_7}
% \newcommand{\treight}{\rho_5}
% \newcommand{\trnine}{\rho_{10}}
% \newcommand{\trten}{\rho_{11}}

% \newcommand{\nest}[2]{\mathtt{nest}(#1\!\rightarrow\! #2)}
\newcommand{\nest}[2]{\mathtt{nest}(#1,#2)}
% \newcommand{\figevnest}[3]{\figev{#1}{ \nest{#2}{#3} } }
\newcommand{\figevnest}[3]{ \figev{#1}{\acq(#2)}\figev{#1}{\acq(#3)}\figev{#1}{\rel(#3)}\figev{#1}{\rel(#2)} }

\newcommand{\toolname}{\textsc{RAPID}\xspace}
\newcommand{\lhist}{\mathsf{History}}

\newcommand{\djitp}{\textsc{Djit}+}

% \newcommand{\vc}[1]{\!\texttt{#1}\!}
\newcommand{\vc}[1]{$\langle${\texttt{#1}}$\rangle$}


% \newcommand{\abst}[1]{\widehat{#1}}
\newcommand{\abst}[1]{{#1}^{\textsf{abs}}}
\newcommand{\SyncPAlgo}{\textsf{SyncP}\xspace}
\newcommand{\SPClosure}[1]{\mathsf{SPClosure}_{#1}}
\newcommand{\SPIdeal}[1]{\mathsf{SPIdeal}_{#1}}
\newcommand{\TOOClosure}[1]{\mathsf{TLClosure}_{#1}}

\newcommand{\lkevgraph}[1]{\mathsf{ALG}_{#1}}

%%%%%%%%%% Trace numbers %%%%%%%%%%
\newcounter{count}

\newcommand\generator[1]%
{%
  \stepcounter{count}%
  \expandafter\edef\csname#1\endcsname{\thecount}%
}

\generator{two}
\generator{one}
\generator{exampleone}
\generator{exampletwo}
\generator{examplethree}
\generator{examplefour}
\generator{three}
\generator{four}
\generator{five}
\generator{six}


