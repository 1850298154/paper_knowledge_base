\section{Deadlock Avoidance}
\label{app:deadlock}

The main idea behind these constraints is to incorporate rotation into the swarm constraints~\citep{Chen2023}. 
To achieve this, we modify the left side of constraint~(\ref{eq:tvb}):

\begin{align}
    \label{eq:tvbsoftconstraints}
    &n\uli{\mathrm{0}, ij}(hT\ul{c}+2T|k-1)^T\Theta^{-1} \\
    &\opindent\times[\tilde{p}\uli{j}(hT\ul{c}+2T|k-1)-\hat{p}\uli{i,w}(hT\ul{c}+T|k)] \nonumber \\
    &\geq \begin{cases}
        \parbox[c]{.55\linewidth}{$\frac{1}{2}(\hat{d}\ul{min}$\\ \hphantom{A}+ $||n\uli{ij}(hT\ul{c}+2T|k-1)||\ul{2})$\\ \hphantom{A}+ $\epsilon$} & \text{if~} j\in\mathcal{A}\ul{ET}(k)\\
        \hat{d}\ul{min} + \epsilon & \text{else}
    \end{cases},\nonumber
\end{align}
where $\epsilon\in \mathbb{R}_{\geq 0}$ is an additional optimization variable.
\reviewerone{$\epsilon \geq 0$ hereby ensures that the constraints in the limit of $\epsilon=0$ are the same as the constraints (\ref{eq:tvb}), ensuring that the guarantees still hold~\cite{Chen2023}}

Following~\cite{Chen2023}, we increase the weight of $\epsilon$ in the objective function when UAV $j$ is to the right of UAV $i$, pushing each UAV to its right and causing approaching UAVs to rotate around each other. 
Unlike~\cite{Chen2023}, we keep the soft constraint hyperparameters constant, as they perform well without adaptation.


\subsection{High-Level Path Planner}


We combine the soft constraints with a high-level planner similar to~\cite{Park2022}. 
In normal operation, the desired target state $x\uli{i, \mathrm{target}}$ in optimization problem~(\ref{eq:opt}) equals the UAV's actual target. 
When a deadlock occurs---detected when all velocities fall below a thresholdâ€”a CU activates the high-level planner, and $x\uli{i, \mathrm{target}}$ is set to an intermediate target calculated by the planner.

Each CU runs its portion of the high-level planner for its assigned subset of UAVs in parallel with the communication round, avoiding additional computation time. 
The intermediate target positions are communicated in the subsequent communication round.

The high-level planner classifies UAVs into those continuing towards their targets and those that should make room for others. 
For each assigned UAV~$i$, the CU determines if it should make room for another UAV~$j$ based on the following conditions:
\begin{itemize}
    \item UAV~$i$ is within a certain distance of UAV~$j$,
    \item UAV~$j$ is not closer to its target than UAV~$i$,
    \item UAV~$i$ is moving towards UAV~$j$, or UAV~$i$ lies between UAV~$j$ and its target.
\end{itemize}
The CU notes all UAVs for which UAV~$i$ should make room and adjusts UAV~$i$'s path for the closest such UAV. 
Following~\cite{Park2022}, UAV~$i$ sets its new target to its current position plus a vector pointing away from UAV~$j$, adding random noise to resolve symmetric deadlocks.

UAVs follow these intermediate targets until the deadlock resolves or the conditions necessitating making room no longer apply. 
The high-level planner then stops, and all UAVs resume flying to their actual target positions.
