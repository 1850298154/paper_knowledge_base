{
  \begin{algorithm}[tb!]
  \caption{DBS: Deadlock-based Search}
  \newcommand{\OPEN}{\m{\mathit{OPEN}}}
  \label{algo:cp}
  \textbf{Input}:~an OTIMAPP instance\\
  \textbf{Output}:~a solution $\{ \path{1}, \ldots, \path{N} \}$ or \FAILURE
  \begin{algorithmic}[1]
    \State $R.\mathit{constraints} \leftarrow \emptyset$
    \label{algo:cp:root:constraints}
    \State $R.\mathit{paths} \leftarrow$~find paths with ``no use of other goals''
    \label{algo:cp:root:paths}
    \State insert $R$ to \OPEN
    \label{algo:cp:root:insert}
    \Comment \OPEN: priority queue
    \While{$\OPEN \neq \emptyset$}
    \label{algo:cp:while}
    \State $N \leftarrow \OPEN.\mathit{pop}()$
    \label{algo:cp:pop}
    \State $C \leftarrow$ get constraints of $N$ using Algorithm~\ref{algo:detecting-deadlock}
    \label{algo:cp:get-constraints}
    \IFSINGLE{$C = \emptyset$}{\Return $N.\mathit{paths}$}
    \label{algo:cp:return-solution}
    \For{$(i, u, v) \in C$}
    \label{algo:cp:exapnd:for}
    \State $\p{N} \leftarrow
    \begin{aligned}[t] \{
      &\mathit{constraints}: N.\mathit{constraints} + (i, u, v),\\
      &\mathit{paths}: N.\mathit{paths}\}
    \end{aligned}$
    \State update \path{i} in $\p{N}.\mathit{paths}$ to follow $\p{N}.\mathit{constraints}$
    \label{algo:cp:update}
    \IFSINGLE{\path{i} is found}{insert $\p{N}$ to \OPEN}
    \EndFor
    \label{algo:cp:exapnd:for:end}
    \EndWhile
    \label{algo:cp:while:end}
    \State \Return \FAILURE
    \label{algo:cp:return-failure}
  \end{algorithmic}
\end{algorithm}
}