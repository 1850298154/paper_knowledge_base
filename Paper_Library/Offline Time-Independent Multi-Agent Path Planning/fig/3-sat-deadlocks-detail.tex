\begin{figure*}[t]
  \centering
  \begin{tikzpicture}
    \newcommand{\edgesize}{1.6cm}
    \newcommand{\hedgex}{0.75}
    \newcommand{\hedgey}{0.6}
    \tikzset{
      sat-node/.style={vertex, minimum size=0.15cm, fill=black, anchor=center},
      start-node/.style={vertex, minimum size=0.45cm, text width=0.45cm, rectangle},
      goal-node/.style={vertex, minimum size=0.5cm},
      line-c1/.style={orange,->,thick},
      line-c2/.style={blue,->,thick},
      line-c3/.style={cyan,->,thick},
      line-c4/.style={red,->,thick},
      line-c5/.style={teal,->,thick},
      line-c6/.style={olive,->,thick},
      line-c7/.style={magenta,->,thick},
      line-c8/.style={lightgray,->,thick},
      line-c9/.style={violet,->,thick},
    }
    %
    \tiny
    %
    \node[sat-node] (v1) at (0, 0) {};
    \node[sat-node, right=\edgesize of v1.center](v2) {};
    \node[sat-node, right=\edgesize of v2.center](v3) {};
    \node[sat-node, right=\edgesize of v3.center](v4) {};
    \node[sat-node, right=\edgesize of v4.center](v5) {};
    \node[sat-node, right=\edgesize of v5.center](v6) {};
    \node[start-node, right=\edgesize of v6.center](v7) {$z$};
    %
    \node[sat-node](v8) at ($(v1)+(\hedgex, \hedgey)$) {};
    \node[sat-node](v9) at ($(v2)+(\hedgex, \hedgey)$) {};
    \node[sat-node](v10) at ($(v3)+(\hedgex, -\hedgey)$) {};
    %
    \node[start-node](v11) at ($(v2.center) + (0,  2.2)$) {$c^1_2$};
    \node[start-node](v12) at ($(v2.center) + (0, -2.2)$) {$c^3_2$};
    \node[start-node](v17) at ($(v9.center) + (0, 1.6)$){$c^2_2$};
    %
    \node[sat-node](v13) at ($(v9) + ( 0.2,0.4)$) {};
    \node[sat-node](v14) at ($(v3) + (-0.2,-1.1)$) {};
    \node[sat-node](v19) at ($(v3) + (-0.2, 1.1)$){};
    \node[sat-node](v33) at ($(v2) + (-0.2, 1.1)$){};
    \node[sat-node](v34) at ($(v8) + ( 0.2, 0.4)$){};
    \node[sat-node](v35) at ($(v2) + (-0.2, -1.1)$){};
    \node[sat-node](v36) at ($(v4) + (-0.2, -1.1)$){};
    \node[sat-node](v37) at ($(v4) + (-0.2,  0.8)$){};
    \node[sat-node](v38) at ($(v10) + ( 0.2, -0.4)$){};
    %
    \node[goal-node](v15) at ($(v4.center) + (1.3, 2.2)$) {$c^1_2$};
    \node[goal-node, left=0cm of v15](v31) {$c^1_1$};
    \node[goal-node, right=0cm of v15](v32) {$c^1_3$};
    %
    \node[goal-node](v16) at ($(v6.center) + (1.3, 2.2)$) {$c^3_2$};
    \node[goal-node, left=0cm of v16](v29) {$c^3_1$};
    \node[goal-node, right=0cm of v16](v30) {$c^3_3$};
    %
    \node[goal-node](v18) at ($(v5.center) + (1.3, 2.2)$) {$c^2_2$};
    \node[goal-node, left=0cm of v18](v20) {$c^2_1$};
    \node[goal-node, right=0cm of v18](v21) {$c^2_3$};
    %
    \node[goal-node](v22) at ($(v1) + (-0.4, -0.8)$) {$z$};
    \draw[line,->] (v1) -- (v22);
    %
    \coordinate[ left=0.5cm of v1, label=left:{\small$\clubsuit$}](circle-c1);
    \coordinate[right=0.5cm of v7,label=right:{\small$\clubsuit$}](circle-c2);
    %
    % added part
    \node[start-node](v23) at ($(v1.center) + (0, 2.2)$) {$c^1_1$};
    \node[start-node](v24) at ($(v1.center) + (0, -2.2)$) {$c^2_1$};
    \node[start-node](v25) at ($(v8.center) + (0, 1.6)$) {$c^3_1$};
    %
    \node[start-node](v26) at ($(v3.center) + (0, -2.2)$) {$c^1_3$};
    \node[start-node](v27) at ($(v3.center) + (0, 2.2)$) {$c^2_3$};
    \node[start-node](v28) at ($(v10.center) + (0, -1.6)$) {$c^3_3$};
    %

    % left part
    {
      \draw[line-c4] (v1) to[out=60,in=180] (v8);
      \draw[line-c6] (v8) to[out=0,in=120] (v2);
      \draw[line-c1] (v2) to[out=60,in=180] (v9);
      \draw[line-c3] (v9) to[out=0,in=120] (v3);
      \draw[line-c7] (v3) to[out=-60,in=180] (v10);
      \draw[line-c9] (v10) to[out=0,in=-120] (v4);
      \draw[line-c5] (v1) to[out=-60,in=-120] (v2);
      \draw[line-c2] (v2) to[out=-60,in=-120] (v3);
      \draw[line-c8] (v3) to[out=60,in=120] (v4);
    }
    % right part
    {
      \draw[line-c4] (v4) to[out=60,in=120] (v5);
      \draw[line-c1] (v4) -- (v5);
      \draw[line-c7] (v4) to[out=-60,in=-120] (v5);
      %
      \draw[line-c5] (v5) to[out=60,in=120] (v6);
      \draw[line-c3] (v5) -- (v6);
      \draw[line-c8] (v5) to[out=-60,in=-120] (v6);
      %
      \draw[line-c6] (v6) to[out=60,in=120] (v7);
      \draw[line-c2] (v6) -- (v7);
      \draw[line-c9] (v6) to[out=-60,in=-120] (v7);
    }
    % starts/goals
    {
      \draw[line-c1] (v11) -- (v2);
      \draw[line-c1] (v5) -- (v15);
      %
      \draw[line-c2] (v12) -- (v2);
      \draw[line-c2] (v7.north) -- (v16);
      %
      \draw[line-c3] (v17) -- (v9);
      \draw[line-c3] (v6) -- (v18);
      %
      \draw[line-c5] (v6) -- (v20);
      \draw[line-c8] (v6) -- (v21);
      %
      \draw[line-c4] (v5) -- (v31);
      \draw[line-c7] (v5) -- (v32);
      %
      \draw[line-c6] (v7.north) -- (v29);
      \draw[line-c9] (v7.north) -- (v30);
    }
    % long lines
    {
      \draw[line-c1] (v9) -- (v13);
      \draw[line-c1] (v13) to[out=0,in=110] (v4);
      \draw[line-c2] (v3) -- (v14);
      \draw[line-c2] (v14) to[out=-10,in=-110] (v6);
      \draw[line-c3] (v3) -- (v19);
      \draw[line-c3] (v19) to[out=5,in=120] (v5);
      %
      \draw[line-c4] (v34) to[out=-18,in=115] (v4);
      \draw[line-c5] (v35) to[out=-10,in=-110] (v5);
      \draw[line-c6] (v33) to[out=0,in=110] (v6);
      %
      \draw[line-c7] (v38) to[out=0,in=-110] (v4);
      \draw[line-c8] (v37) to[out=0,in=110] (v5);
      \draw[line-c9] (v36) to[out=0,in=-110] (v6);
    }
    % loop
    {
      \draw[line,->] (circle-c1.east) -- (v1);
      \draw[line,->] (v7) -- (circle-c2.west);
    }
    %
    {
      \draw[line-c4] (v23) -- (v1);
      \draw[line-c5] (v24) -- (v1);
      \draw[line-c6] (v25) -- (v8);
      \draw[line-c7] (v26) -- (v3);
      \draw[line-c8] (v27) -- (v3);
      \draw[line-c9] (v28) -- (v10);
      \draw[line-c6] (v2) -- (v33);
      \draw[line-c4] (v8) -- (v34);
      \draw[line-c5] (v2) -- (v35);
      \draw[line-c9] (v4) -- (v36);
      \draw[line-c8] (v4) -- (v37);
      \draw[line-c7] (v10) -- (v38);
    }

  \end{tikzpicture}
  \caption{Complete version of Fig.~\ref{fig:3-sat-deadlocks} for $(x_1 \lor x_2 \lor \lnot x_3) \land (\lnot x_1 \lor x_2 \lor x_3) \land (x_1 \lor \lnot x_2 \land \lnot x3)$.
    Each color corresponds to a path for each agent.
  }
  \label{fig:3-sat-deadlocks-detail}
\end{figure*}
