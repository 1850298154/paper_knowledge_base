\begin{figure*}[t]
  \centering
  \begin{tikzpicture}
    \newcommand{\edgesize}{1.6cm}
    \newcommand{\hedgex}{0.75}
    \newcommand{\hedgey}{0.6}
    \tikzset{
      sat-node/.style={vertex, minimum size=0.15cm, fill=black, anchor=center},
      start-node/.style={vertex, minimum size=0.45cm, text width=0.45cm, rectangle},
      goal-node/.style={vertex, minimum size=0.5cm},
      line-c1/.style={orange,->},
      line-c2/.style={blue,->},
      line-c3/.style={cyan,->},
      bold-line/.style={very thick},
    }
    %
    \tiny
    %
    \node[sat-node] (v1) at (0, 0) {};
    \node[sat-node, right=\edgesize of v1.center](v2) {};
    \node[sat-node, right=\edgesize of v2.center](v3) {};
    \node[sat-node, right=\edgesize of v3.center](v4) {};
    \node[sat-node, right=\edgesize of v4.center](v5) {};
    \node[sat-node, right=\edgesize of v5.center](v6) {};
    \node[start-node, right=\edgesize of v6.center](v7) {$z$};
    %
    \node[sat-node](v8) at ($(v1)+(\hedgex, \hedgey)$) {};
    \node[sat-node](v9) at ($(v2)+(\hedgex, \hedgey)$) {};
    \node[sat-node](v10) at ($(v3)+(\hedgex, -\hedgey)$) {};
    %
    \node[start-node](v11) at ($(v2.center) + (0,  1.6)$) {$c^1_2$};
    \node[start-node](v12) at ($(v2.center) + (0, -1.6)$) {$c^3_2$};
    \node[start-node, above=0.77cm of v9.center](v17) {$c^2_2$};
    %
    \node[sat-node](v13) at ($(v9) + ( 0.2,0.4)$) {};
    \node[sat-node](v14) at ($(v3) + (-0.1,-1.1)$) {};
    \node[sat-node](v19) at ($(v3) + (-0.1, 1.2)$){};
    %
    \node[goal-node, above right=1.3cm of v4.center](v15) {$c^1_2$};
    \node[goal-node, above right=1.3cm of v5.center](v18) {$c^2_2$};
    \node[goal-node, above right=1.3cm of v6.center](v16) {$c^3_2$};
    %
    \node[goal-node, left=0cm of v18](v20) {$c^2_1$};
    \node[goal-node, right=0cm of v18](v21) {$c^2_3$};
    %
    \node[goal-node](v22) at ($(v1) + (-0.2, -0.8)$) {$z$};
    \draw[line,->] (v1) -- (v22);
    %
    \coordinate[ left=0.5cm of v1, label=left:{\small$\clubsuit$}](circle-c1);
    \coordinate[right=0.5cm of v7,label=right:{\small$\clubsuit$}](circle-c2);
    %
    % left part
    {
      \draw[line,->,bold-line] (v1) to[out=60,in=180] (v8);
      \draw[line,->,bold-line] (v8) to[out=0,in=120] (v2);
      \draw[line-c1,bold-line] (v2) to[out=60,in=180] (v9);
      \draw[line-c3,bold-line] (v9) to[out=0,in=120] (v3);
      \draw[line,->,bold-line] (v3) to[out=-60,in=180] (v10);
      \draw[line,->,bold-line] (v10) to[out=0,in=-120] (v4);
      \draw[line,->,bold-line] (v1) to[out=-60,in=-120] (v2);
      \draw[line-c2,bold-line] (v2) to[out=-60,in=-120] (v3);
      \draw[line,->,bold-line] (v3) to[out=60,in=120] (v4);
    }
    % right part
    {
      \draw[line,->] (v4) to[out=60,in=120] (v5);
      \draw[line-c1] (v4) -- (v5);
      \draw[line,->] (v4) to[out=-60,in=-120] (v5);
      %
      \draw[line,->] (v5) to[out=60,in=120] (v6);
      \draw[line-c3] (v5) -- (v6);
      \draw[line,->] (v5) to[out=-60,in=-120] (v6);
      %
      \draw[line,->] (v6) to[out=60,in=120] (v7);
      \draw[line-c2] (v6) -- (v7);
      \draw[line,->] (v6) to[out=-60,in=-120] (v7);
    }
    % starts/goals
    {
      \draw[line-c1] (v11) -- (v2);
      \draw[line-c1] (v5)  to[out=100,in=-50] (v15);
      %
      \draw[line-c2] (v12) -- (v2);
      \draw[line-c2] (v7.north) -- (v16);
      %
      \draw[line-c3] (v17) -- (v9);
      \draw[line-c3] (v6) to[out=100,in=-50] (v18);
      %
      \draw[line,->] (v6) to[out=110,in=-40] (v20);
      \draw[line,->] (v6)  -- (v21);
    }
    % long lines
    {
      \draw[line-c1] (v9) -- (v13);
      \draw[line-c1] (v13) to[out=0,in=110] (v4);
      \draw[line-c2] (v3) -- (v14);
      \draw[line-c2] (v14) to[out=-10,in=-110] (v6);
      \draw[line-c3] (v3) -- (v19);
      \draw[line-c3] (v19) to[out=5,in=120] (v5);
    }
    % loop
    {
      \draw[line,->] (circle-c1.east) -- (v1);
      \draw[line,->] (v7) -- (circle-c2.west);
   }
    % labels
    {
     \node[rectangle,anchor=north west,
     minimum height=3.8cm,text width=2.0cm, draw,densely dotted,
     label=below:{\textit{variable decider}: $x_2$}] at (1.35, 1.9) {};
     %
     \node[rectangle,anchor=north west,
     minimum height=2.3cm,text width=1.95cm, draw,densely dotted,
     label=above:{\textit{clause constrainer}:~$C^2$}] at (6.55, 1.5) {};
     %
     \node[above right=0.5cm of v5,anchor=south] {$c^2_1$};
     \node[right=0.7cm of v5,anchor=south] {$c^2_2$};
     \node[below right=0.45cm of v5,anchor=north] {$c^2_3$};
     %
     \node[anchor=west] at (1.9,  0.3) {true (upper)};
     \node[anchor=west] at (1.9, -0.2) {false (lower)};
     %
     \node[start-node, label=right:{start}](label-s) at (10.5, -1.1){};
     \node[goal-node, below=0.1cm of label-s, label=right:{goal}](label-g) {};
     %
     \node[](vacation) at (4.5, 2.0) {\textit{vacation vertex}};
     \draw[densely dashed,->] (vacation.west) -- ($(v19)+(0.1,0.1)$);
     \draw[densely dashed,->] (vacation.west) -- ($(v13)+(0.1,0.1)$);
   }
  \end{tikzpicture}
  \caption{OTIMAPP instance and solution reduced from the 3-SAT instance $(x_1 \lor x_2 \lor \lnot x_3) \land (\lnot x_1 \lor x_2 \lor x_3) \land (x_1 \lor \lnot x_2 \land \lnot x3)$.
    For visualization, we break a large circle; regard two $\clubsuit$ marks as connected.
    Omitted vertices and edges are complemented in Fig.~\ref{fig:3-sat-deadlocks-detail}.
  }
  \label{fig:3-sat-deadlocks}
\end{figure*}
