{
\begin{figure}
  \centering
  \begin{tikzpicture}
    \newcommand{\edgesize}{0.3cm}
    \newcommand{\edgesizehalf}{0.15cm}
    \newcommand{\edgesizethreetwo}{0.35cm}
    \newcommand{\longedgesize}{1.2cm}
    \small
    \tikzset{
      satnode/.style={vertex, minimum size=0.15cm, fill=black},
      start-node/.style={vertex, minimum size=0.4cm,rectangle},
      goal-node/.style={vertex, minimum size=0.4cm},
      line-c1/.style={brown,->},
      line-c2/.style={lightgray,->},
    }
    {
      \node[satnode, label=above:{\small $u$}](v1) at (0.0, 0.0) {};
      \node[satnode, right=\edgesize of v1](v2) {};
      \node[start-node, right=\edgesize of v2](v3) {$z_2$};
      \node[satnode, right=\edgesize of v3](v4) {};
      \node[satnode, right=\edgesize of v4,label=above:{\small $v$}](v5) {};
      \node[start-node, above=\edgesize of v2](v6) {$z_1$};
      \node[goal-node, below=\edgesize of v4](v7) {$z_1$};
      \node[goal-node, below=\edgesize of v7](v8) {$z_2$};
      %
      \foreach \u / \v in {v1/v2,v2/v3,v3/v4,v4/v5,v6/v2,v4/v7,v7/v8}
      \draw[line] (\u) -- (\v);
      \draw[line, densely dotted] (v1) -- ($(v1) + (-0.5, 0.0)$);
      \draw[line, densely dotted] (v5) -- ($(v5) + (0.5, 0.0)$);
      %
      \node[start-node, label=right:{\scriptsize start}](label-s) at (3.1, -0.8){};
      \node[goal-node, label=right:{\scriptsize goal}](label-g) at (4.2, -0.8){};
    }
  \end{tikzpicture}
  \caption{
    A \textit{oneway constrainer}.
    This gadget transforms an undirected edge $(u, v)$ to a directed one.
    Any agent is allowed to move only the way from $u$ to $v$ when limiting solutions to simple paths.
  }
  \label{fig:undirected-gadget}
\end{figure}
}
