\beginbass
%
For the completeness result we appeal to the bounded coinduction principle of 
\GISs (\Cref{prop:bcp}, \Cref{fig:principles}), which requires us to prove boundedness and 
consistency of \lstinline{FCompS}. Concerning boundedness, 
we start by computing a proof of \lstinline{FCompI Se}
for every session \lstinline{Se} that may reduce a successful 
configuration, by induction on the reduction.

\begin{lstlisting}
MS$\rightarrow$FCompI : $\forall${Se} $\rightarrow$ MaySucceed Se $\rightarrow$ FCompI Se
MS$\rightarrow$FCompI (_ , reds , succ) = aux reds succ
  where
    aux : $\forall${Se Se'} $\rightarrow$ Reductions Se Se' $\rightarrow$ 
      	Success Se' $\rightarrow$ FCompI Se
    aux $\epsilon$ succ = apply-ind (inj$_1$ success) (_ , succ) $\lambda$ ()
    aux (sync (out fx) inp $\triangleleft$ red) succ =
      apply-ind (inj$_2$ out-inp) 
        (_ , _ , fx) $\lambda${Data.Fin.zero $\rightarrow$ aux red succ}
    aux (sync inp (out gx) $\triangleleft$ red) succ =
      apply-ind (inj$_2$ inp-out) 
        (_ , _ , gx) $\lambda${Data.Fin.zero $\rightarrow$ aux red succ}
\end{lstlisting}

where \lstinline{apply-ind} is the function in the \GIS library that applies 
a rule for an inductively defined predicate.
%
Then, boundedness follows by observing that $R$ fairly compliant with $S$ 
implies the existence of a successful configuration reachable from $\session{R}{S}$.

\begin{lstlisting}
bounded : $\forall${Se} $\rightarrow$ FCompS Se $\rightarrow$ FCompI Se
bounded fc = MS$\rightarrow$FCompI (fc $\epsilon$)
\end{lstlisting}

Showing that \lstinline{FCompS} is consistent means showing that every 
configuration \lstinline{Se} that satisfies \lstinline{FCompS} is 
found in the conclusion of a rule in the inference system \lstinline{FCompIS}
whose premises are all configurations that in turn satisfy \lstinline{FCompS}. 
This follows by a straightforward case analysis on the \emph{first} reduction 
of \lstinline{Se} that leads to a successful configuration.

\begin{lstlisting}
consistent : $\forall${Se} $\rightarrow$ FCompS Se $\rightarrow$ ISF[ FCompIS ] FCompS Se
consistent fc with fc $\epsilon$
... | _ , $\epsilon$ , succ = success , (_ , succ) , refl , $\lambda$ ()
... | _ , sync (out fx) inp $\triangleleft$ _ , _ =
out-inp , (_ , _ , fx) , refl , 
  $\lambda$ (_ , gx) reds $\rightarrow$ fc (sync (out gx) inp $\triangleleft$ reds)
... | _ , sync inp (out gx) $\triangleleft$ _ , _ =
inp-out , (_ , _ , gx) , refl , 
  $\lambda$ (_ , fx) reds $\rightarrow$ fc (sync inp (out fx) $\triangleleft$ reds)
\end{lstlisting}

We obtain the completeness proof using the bounded coinduction principle, 
\ie the library function
\lstinline{bounded-coind} (see \Cref{fig:principles})
which applies the principle to the boundedness and
consistency proofs.

\begin{lstlisting}
complete : $\forall${Se} $\rightarrow$ FCompS Se $\rightarrow$ FCompG Se
complete = 
  bounded-coind[ FCompIS , FCompCOIS ] FCompS bounded consistent
\end{lstlisting}

