\newcommand{\fn}[1]{\mathsf{fn}(#1)}
\newcommand{\bn}[1]{\mathsf{bn}(#1)}
\newcommand{\pcong}{\preccurlyeq}
\newcommand{\subst}[2]{\{#1/#2\}}

% general 
\newcommand{\ple}[1]{\ensuremath{\langle #1 \rangle}} 
\newcommand{\N}{\mathbb{N}} 
\newcommand{\kw}[1]{\mathsf{#1}} 
\newcommand{\seqof}[1]{\overline{#1}}



% meta-variables 
\newcommand{\PP}{P}
\newcommand{\aP}{Q}
\newcommand{\bP}{R} 
\newcommand{\var}{x}
\newcommand{\avar}{y}
\newcommand{\bvar}{z}
\newcommand{\sn}{s}
\newcommand{\asn}{t}
\newcommand{\role}[1][p]{\kw{\color{purple}#1}}
\newcommand{\rolep}{\role[p]}
\newcommand{\roleq}{\role[q]}
\newcommand{\roler}{\role[r]}
\newcommand{\arole}{\kw{q}} 
\newcommand{\brole}{\kw{r}} 
\newcommand{\ep}[2]{#1[#2]} 
\newcommand{\chvar}{u}
\newcommand{\achvar}{v} 
\newcommand{\la}{l}
\newcommand{\ala}{m} 
\newcommand{\pcn}{c}
\newcommand{\pdn}{A}
\newcommand{\apdn}{B}
\newcommand{\bpdn}{C} 

% process constructors 
\newcommand{\pspace}{\,} 
\newcommand{\psep}{.} 
\newcommand{\oact}{\kw{!}}
\newcommand{\iact}{\kw{?}} 
\newcommand{\pdone}{\mkkeyword{done}} 
\newcommand{\pclose}[1]{\mkkeyword{close}\pspace #1} 
\newcommand{\pwait}[2][\psep]{\mkkeyword{wait}\pspace #2#1} 
\newcommand{\act}[3] {#1[#2]#3} 
\newcommand{\pact}[4]{\act{#1}{#2}{#3}#4} 
\newcommand{\pbranch}[6][]{\pact{#2}{#3}{#4}{\ifblank{#1}{#5\psep #6}{\{#5\psep #6\}_{#1}}}}
\newcommand{\pobranch}[5][]{\pbranch[#1]{#2}{#3}{\oact}{#4}{#5}}
\newcommand{\pibranch}[5][]{\pbranch[#1]{#2}{#3}{\iact}{#4}{#5}}
\newcommand{\poch}[4]{\pact{#1}{#2}{\oact}{#3\psep #4}} 
\newcommand{\pich}[4]{\pact{#1}{#2}{\iact}{(#3)\psep #4}} 
\newcommand{\pcast}[1]{\lceil #1 \rceil}
\newcommand{\pres}[2]{(#1)(#2)}
\newcommand{\ppar}{\mathbin{\mid}} 
\newcommand{\pinvk}[2]{#1\langle #2 \rangle}
\newcommand{\pdef}[4][]{\Definition[#1]{#2}{#3}{#4}} 
\newcommand{\pchoice}[1][]{\oplus\ifblank{#1}{}{_{#1}}}

%%%%%%%%%%%%
%%% POPL %%%
%%%%%%%%%%%%

\newcommand{\angles}[1]{\langle#1\rangle}
\newcommand{\parens}[1]{(#1)}
\newcommand{\braces}[1]{\{#1\}}

\newcommand{\Done}{\pdone}
%\newcommand{\Call}[2]{\ifblank{#2}{#1}{\pinvk{#1}{#2}}}
\newcommand{\Call}[2]{#1\ifblank{#2}{}{\angles{#2}}}
\newcommand{\POutput}[2]{#1 {\Out} #2}
\newcommand{\PInput}[2]{#1 {\In} #2}
\newcommand{\PSend}[2]{\POutput{#1}{\set{#2}}}
\newcommand{\PRecv}[2]{\PInput{#1}{\set{#2}}}
\newcommand{\PBranch}[5]{{#1}{#2}\{{#3}\psep{#4}\}_{#5}}
\newcommand{\Close}[1]{\pclose{#1}}
\newcommand{\Wait}[2]{\pwait{#1}{#2}}
\newcommand{\Cast}[1]{\pcast{#1}}
\newcommand{\NewPar}[3]{(#1)(#2 \parop #3)}
\newcommand{\Program}{\mathcal{P}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\newcommand{\procs}[1]{\vec{#1}}
\newcommand{\procs}[1]{\seqof{#1}}
\newcommand{\hasrole}[2]{#1[#2]} 

\newcommand{\peq}{\mathrel{\smash{\stackrel\vartriangle=}}} 
\newcommand{\Definition}[4][]{#2\ifblank{#3}{}{(#3)} #1 \peq #1 #4}

\newcommand{\tass}[3]{#1 : [\ifblank{#2}{()}{#2}; #3]}

\newenvironment{lines}[1][t]{
  \begin{array}[#1]{@{}l@{}}
}{
  \end{array}
}


%%%%%%%%%%%%%%%%
%%% EXAMPLES %%%
%%%%%%%%%%%%%%%%

\newcommand{\Main}{\textit{Main}}
\newcommand{\Buyer}{\textit{Buyer}}
\newcommand{\Seller}{\textit{Seller}}
\newcommand{\Carrier}{\textit{Carrier}}

\newcommand{\rbuyer}{\role[b]}
\newcommand{\rseller}{\role[s]}
\newcommand{\rcarrier}{\role[c]}

\newcommand{\tquery}{\Tag[query]}
\newcommand{\tprice}{\Tag[price]}
\newcommand{\tok}{\Tag[ok]}
\newcommand{\tcancel}{\Tag[cancel]}
\newcommand{\tbox}{\Tag[box]}
\newcommand{\tsplit}{\Tag[split]}
\newcommand{\tgiveup}{\Tag[giveup]}
\newcommand{\tyes}{\Tag[yes]}
\newcommand{\tno}{\Tag[no]}

\newcommand{\player}{\role[player]}
\newcommand{\rplayer}{\role[p]}
\newcommand{\tplay}{\Tag[play]}
\newcommand{\tquit}{\Tag[quit]}
\newcommand{\twin}{\Tag[win]}
\newcommand{\tlose}{\Tag[lose]}

\newcommand{\Sort}{\textit{Sort}}
\newcommand{\Merge}{\textit{Merge}}

\newcommand{\rworker}{\role[w]}
\newcommand{\rmaster}{\role[m]}

\newcommand{\treq}{\Tag[req]}
\newcommand{\tres}{\Tag[res]}

\newcommand{\SlotMachine}{\mathit{Slot}}

% %global types 
% \newcommand{\GEnd}{\mkkeyword{End}} 
% \newcommand{\coh}[2]{#1 \models #2} 
% \newcommand{\act}{\alpha} 
% \newcommand{\roles}[1]{\mathsf{roles}(#1)} 


\newcommand{\rk}{\mathsf{wg}} 

%%%%%%%%%%%%%%
%%% TYPING %%%
%%%%%%%%%%%%%%

\newcommand{\EmptyCtx}{\emptyset}
\newcommand{\Ctx}{\Gamma}
\newcommand{\CtxC}{\Gamma}
\newcommand{\CtxD}{\Delta}

\newcommand{\wtpx}[4]{#1 \vdash\ifblank{#2}{}{_{#2}}\ifblank{#4}{}{^{#4}} #3}
\newcommand{\wtp}[3][]{\wtpx{#2}{}{#3}{#1}}
\newcommand{\wtpc}[3][]{\wtpx{#2}\CoInd{#3}{#1}}
\newcommand{\wtpi}[3][]{\wtpx{#2}\Ind{#3}{#1}}
\newcommand{\wtpn}[4][]{#3 \vDash^{#2} #4}

%%%%%%%%%%%%%%%
%%% MEASURE %%%
%%%%%%%%%%%%%%%
\newcommand{\Measure}{\MeasureM}
\newcommand{\MeasureM}{\mu}
\newcommand{\MeasureN}{\nu}

%%%%%%%%%%%%%%%%%%%%
%%% PROC CONTEXT %%%
%%%%%%%%%%%%%%%%%%%%

\newcommand{\PCtx}{\mathcal{C}}
\newcommand{\PCtxC}{\mathcal{C}}
\newcommand{\PCtxD}{\mathcal{D}}
\newcommand{\Hole}{[~]}

%%%%%%%%%%%%%%%%%%%%
%%% NORMAL FORMS %%%
%%%%%%%%%%%%%%%%%%%%

\newcommand{\Xnf}[1]{#1^{\mathit{nf}}}
\newcommand{\Pnf}{\Xnf{P}}
\newcommand{\Qnf}{\Xnf{Q}}
\newcommand{\Rnf}{\Xnf{R}}
\newcommand{\Xpar}[1]{#1^{\mathit{par}}}
\newcommand{\Ppar}{\Xpar P}
\newcommand{\Qpar}{\Xpar Q}
\newcommand{\Rpar}{\Xpar R}
\newcommand{\Pth}{P^{\mathit{th}}}
\newcommand{\Qth}{Q^{\mathit{th}}}