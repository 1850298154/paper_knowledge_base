\beginalto
%
In this section we describe the type system for the calculus of multiparty
sessions of \Cref{sec:ts_multi_proc}. 
%
The typing judgments have the form $\wtp[n]\Ctx{P}$, meaning that the process
$P$ is well typed in the typing context $\Ctx$ and has rank $n$. As usual, the
\emph{typing context} is a map associating channels with session types (\Cref{ssec:multi}) and is
meant to contain an association for each name in $\fn{P}$. We write $u_1 : S_1,
\dots, u_n : S_n$ for the map with domain $\set{u_1,\dots,u_n}$ that associates
$u_i$ with $S_i$. Occasionally we write $\seqof{u : S}$ for the same context,
when the number and the specific associations are unimportant. We also assume
that endpoints occurring in a typing context have different session names. That
is, $\ep{s}\rolep, \ep{s}\roleq \in \dom\Ctx$ implies $\rolep = \roleq$. 
%
This constraint makes sure that each well-typed process plays exactly one role
in each of the sessions in which it participates. It is also a common assumption
made in all multiparty session calculi.
%
We use $\Ctx$ and $\CtxD$ to range over typing contexts, we write $\EmptyCtx$
for the empty context and $\Ctx,\CtxD$ for the union of $\Ctx$ and $\CtxD$ when
they have disjoint domains and disjoint sets of session names.
% 
The \emph{rank} $n$ in a typing judgment estimates the number of sessions that
$P$ has to create and the number of casts that $P$ has to perform in order to
terminate. The fact that the rank is finite suggests that so is the effort
required by $P$ to terminate.

%%%%%%%%%%%%%
%%% RULES %%%
%%%%%%%%%%%%%

\subsection{Typing Rules}
\input{ts-multi/ts-rules}

%%%%%%%%%%%%%%%%
%%% EXAMPLES %%%
%%%%%%%%%%%%%%%%

\subsection{Examples}
\label{ssec:ts_multi_ex}
\input{ts-multi/ts-examples}