{
\newcommand{\entry}[5]{
  \tikzmath{
    \x = #1 * \xsize;
    \y = - #2 * \ysize;
  }
  \node[] at (\x, \y) {\includegraphics[width=0.18\linewidth,trim={2 2 2 2},clip]{images/denoising/#3/diffusion_step_#4_#5}};
}
\begin{figure}[!hp]
\centering
\begin{tikzpicture}
\node[anchor=north east] at (0, -0.01) {\includegraphics[width=1\linewidth,trim={0 2.5cm 0 0},clip]{images/8drones_trajectories}};
\node[anchor=north east] at (0, 0)  {\includegraphics[width=0.25\linewidth]{images/8trajectories_topdown.pdf}};
%
\tikzmath{
  \y = -3.8;
}
\node[anchor=north east] at (0, \y)  {\includegraphics[width=0.95\linewidth]{images/min-interagent-dist.pdf}};
\node[fill=white,inner sep=1pt] at (-0.7, \y-0.97) {\scriptsize Time [s]};
\node[rotate=90] at (-8.5, \y-0.7) {\scriptsize Dist [m]};
\end{tikzpicture}\medskip\\
%
\begin{tikzpicture}
  \tikzmath{
    \xsize = 1.6;
    \ysize = 1.6;
  }
  %
  \entry{0}{0}{2dholo}{1}{0}
  \entry{1}{0}{2dholo}{1}{24}
  \entry{2}{0}{2dholo}{1}{49}
  \entry{3}{0}{2dholo}{1}{74}
  \entry{4}{0}{2dholo}{1}{99}
  %
  \entry{0}{1}{2dholo}{2}{0}
  \entry{1}{1}{2dholo}{2}{24}
  \entry{2}{1}{2dholo}{2}{49}
  \entry{3}{1}{2dholo}{2}{74}
  \entry{4}{1}{2dholo}{2}{99}
  %
  \entry{0}{2}{2dholo}{3}{0}
  \entry{1}{2}{2dholo}{3}{24}
  \entry{2}{2}{2dholo}{3}{49}
  \entry{3}{2}{2dholo}{3}{74}
  \entry{4}{2}{2dholo}{3}{99}
  %
  \entry{0}{3}{2dholo}{4}{0}
  \entry{1}{3}{2dholo}{4}{24}
  \entry{2}{3}{2dholo}{4}{49}
  \entry{3}{3}{2dholo}{4}{74}
  \entry{4}{3}{2dholo}{4}{99}
  %
  \entry{0}{4}{2dholo}{5}{0}
  \entry{1}{4}{2dholo}{5}{24}
  \entry{2}{4}{2dholo}{5}{49}
  \entry{3}{4}{2dholo}{5}{74}
  \entry{4}{4}{2dholo}{5}{99}
  %
  % 3d holo
  \entry{0}{5.0}{3dholo}{1}{0}
  \entry{1}{5.0}{3dholo}{1}{24}
  \entry{2}{5.0}{3dholo}{1}{49}
  \entry{3}{5.0}{3dholo}{1}{74}
  \entry{4}{5.0}{3dholo}{1}{99}
  %
  % 2d car
  \entry{0}{6.0}{2dcar}{1}{0}
  \entry{1}{6.0}{2dcar}{1}{24}
  \entry{2}{6.0}{2dcar}{1}{49}
  \entry{3}{6.0}{2dcar}{1}{74}
  \entry{4}{6.0}{2dcar}{1}{99}
  %
  % label
  \node[] at (\xsize * 2, 1.2) {denoising step $\rightarrow$};
  \node[rotate=90] at (-1.2, -\ysize * 2) {$\leftarrow$ iteration};
  {
    \scriptsize
    \node[] at (\xsize * 0, 0.9) {99};
    \node[] at (\xsize * 1, 0.9) {75};
    \node[] at (\xsize * 2, 0.9) {50};
    \node[] at (\xsize * 3, 0.9) {25};
    \node[] at (\xsize * 4, 0.9) {0};
    %
    \node[] at (-0.9, -\ysize * 0) {1};
    \node[] at (-0.9, -\ysize * 1) {2};
    \node[] at (-0.9, -\ysize * 2) {3};
    \node[] at (-0.9, -\ysize * 3) {4};
    \node[] at (-0.9, -\ysize * 4) {5};
    %
    \node[] at (-0.9, -\ysize * 5.0) {1};
    %
    \node[] at (-0.9, -\ysize * 6.0) {1};
  }
\end{tikzpicture}
\caption{
  Zero-shot deployment of deconflicted trajectories with eight multirotors (top) with denoised trajectories (top-right inset); the minimum pairwise inter-robot distance shows safety margin w.r.t robot radius (solid and dotted black lines).
  The lower plots visualize denoising of 16 2D-holonomic, 8 3D-holonomic, and 8 differential-drive robots. Each plot shows the result of adding deformation denoised at current step to trajectory given by previous iteration.
}
\label{fig:denoising}
\end{figure}
}
